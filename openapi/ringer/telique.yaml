openapi: 3.0.3
info:
  title: Telique API
  description: |
    The Ringer Telique API provides access to telecommunications data, 
    including caller name (CNAM) data, line type information, and more.
    
    The API also includes services for checking phone numbers against 
    Do Not Originate (DNO) and Do Not Call (DNC) databases, as well as 
    STIR/SHAKEN call authentication validation.
  version: 1.0.0
  license:
    name: MIT License
    url: https://github.com/teliax/ringer-oapi/blob/main/LICENSE
  contact:
    name: Ringer API Support
    url: https://docs.ringer.tel/
    email: support@ringer.tel
servers:
  - url: https://api.ringer.tel/v1
    description: Production server
  - url: https://api.staging.ringer.tel/v1
    description: Staging server
security:
  - BearerAuth: []
  - ApiKeyAuth: []
tags:
  - name: CIC
    description: Operations for Carrier Identification Code
  - name: DNC
    description: Operations for Do Not Call database lookups
  - name: DNO
    description: Operations for Do Not Originate database lookups
  - name: DNX
    description: Combined DNO and DNC lookup operations
  - name: Lookup
    description: Operations for looking up phone number information
  - name: Portability
    description: Operations for phone number portability information
  - name: ROR
    description: Operations for Responsible Organization
  - name: STIR/SHAKEN
    description: Operations for call authentication validation
paths:
  /telique/cnam/{phoneNumber}:
    get:
      tags:
        - Lookup
      summary: CNAM Lookup
      description: |
        Retrieve Caller Name (CNAM) information for a phone number.
        This endpoint performs a CNAM (Caller Name) lookup for a specified phone number.
        It first checks the database cache for existing records, and if not found,
        performs an SS7 network lookup to retrieve the caller name information.
      operationId: getCNAM
      parameters:
        - name: phoneNumber
          in: path
          description: The phone number to lookup
          required: true
          schema:
            type: string
            pattern: '^\+?[0-9]{10,15}$'
            example: "8005551234"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CNAMResponse'
        '400':
          description: Bad request - Invalid phone number format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '405':
          description: Method not allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/cnam:
    post:
      tags:
        - Lookup
      summary: CNAM Lookup (POST)
      description: |
        Alternative method to perform a CNAM lookup using a POST request with form data.
      operationId: postCNAM
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                number:
                  type: string
                  description: The phone number to lookup
                  pattern: '^\+?[0-9]{10,15}$'
                  example: "8005551234"
              required:
                - number
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CNAMResponse'
        '400':
          description: Bad request - Missing or invalid phone number
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '405':
          description: Method not allowed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/lrn/{phoneNumber}:
    get:
      tags:
        - Portability
      summary: Retrieve LRN for a phone number
      description: |
        Returns the Local Routing Number (LRN) and Service Provider ID (SPID) 
        for a specified 10-digit North American phone number. This information 
        is used to correctly route calls to numbers that have been ported 
        from one carrier to another.
      operationId: getLrnInfo
      parameters:
        - name: phoneNumber
          in: path
          description: 10-digit North American telephone number (NANP format)
          required: true
          schema:
            type: string
            pattern: '^[2-9][0-9]{9}$'
            example: '5551234567'
      responses:
        '200':
          description: Successful LRN lookup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LrnResponse'
              examples:
                ported:
                  value:
                    phoneNumber: '5551234567'
                    lrn: '5552345678'
                    spid: 'AB12'
                    ported: true
                nonPorted:
                  value:
                    phoneNumber: '5551234567'
                    lrn: '5551234567'
                    spid: null
                    ported: false
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: error
                error: 'Invalid phone number format. Must be a 10-digit NANP number.'
                error_code: 'INVALID_FORMAT'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: error
                error: 'Forbidden. Your API key does not have permission to access this resource.'
                error_code: 'FORBIDDEN'
        '429':
          description: Too many requests
          headers:
            Retry-After:
              schema:
                type: integer
              description: Time in seconds to wait before making another request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/cic/{crn}/{ani}/{lata}:
    get:
      summary: Get CIC information
      description: Retrieve Carrier Identification Code (CIC) information for the specified parameters.
      operationId: getCicInfo
      tags:
        - CIC
      parameters:
        - name: crn
          in: path
          description: Customer Record Number (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: ani
          in: path
          description: Automatic Number Identification (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: lata
          in: path
          description: Local Access and Transport Area (3-digit)
          required: true
          schema:
            type: integer
            minimum: 0
            maximum: 999
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CICResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Unknown CRN
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/cic/{crn}/{ani}/{lata}/plain:
    get:
      summary: Get CIC information (plain text)
      description: Retrieve Carrier Identification Code (CIC) information in plain text format.
      operationId: getCicInfoPlainText
      tags:
        - CIC
      parameters:
        - name: crn
          in: path
          description: Customer Record Number (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: ani
          in: path
          description: Automatic Number Identification (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: lata
          in: path
          description: Local Access and Transport Area (3-digit)
          required: true
          schema:
            type: integer
            minimum: 0
            maximum: 999
      responses:
        '200':
          description: Successful response
          content:
            text/plain:
              schema:
                type: string
                description: CIC code (4 digits, zero-padded)
        '400':
          description: Bad request
          content:
            text/plain:
              schema:
                type: string
        '404':
          description: Unknown CRN
          content:
            text/plain:
              schema:
                type: string
                example: Unknown
        '500':
          description: Server error
          content:
            text/plain:
              schema:
                type: string
  /telique/cicror/{crn}/{ani}/{lata}:
    get:
      summary: Get CIC information with ROR
      description: Retrieve Carrier Identification Code (CIC) information including Responsible Organization (ROR) data.
      operationId: getCicRorInfo
      tags:
        - CIC
      parameters:
        - name: crn
          in: path
          description: Customer Record Number (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: ani
          in: path
          description: Automatic Number Identification (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: lata
          in: path
          description: Local Access and Transport Area (3-digit)
          required: true
          schema:
            type: integer
            minimum: 0
            maximum: 999
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CICRORResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Unknown CRN
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/cicror/{crn}/{ani}/{lata}/plain:
    get:
      summary: Get CIC information with ROR (plain text)
      description: Retrieve Carrier Identification Code (CIC) and Responsible Organization (ROR) information in plain text format.
      operationId: getCicRorInfoPlainText
      tags:
        - CIC
      parameters:
        - name: crn
          in: path
          description: Customer Record Number (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: ani
          in: path
          description: Automatic Number Identification (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
        - name: lata
          in: path
          description: Local Access and Transport Area (3-digit)
          required: true
          schema:
            type: integer
            minimum: 0
            maximum: 999
      responses:
        '200':
          description: Successful response
          content:
            text/plain:
              schema:
                type: string
                description: CIC code and ROR separated by semicolon
                example: "0123;ROUTE1234"
        '400':
          description: Bad request
          content:
            text/plain:
              schema:
                type: string
        '404':
          description: Unknown CRN
          content:
            text/plain:
              schema:
                type: string
                example: Unknown
        '500':
          description: Server error
          content:
            text/plain:
              schema:
                type: string
  /telique/ror/{crn}:
    get:
      summary: Get ROR information
      description: Retrieve Responsible Organization (ROR) information for the specified CRN.
      operationId: getRorInfo
      tags:
        - ROR
      parameters:
        - name: crn
          in: path
          description: Customer Record Number (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RORResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Unknown CRN
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/ror/{crn}/plain:
    get:
      summary: Get ROR information (plain text)
      description: Retrieve Responsible Organization (ROR) information in plain text format.
      operationId: getRorInfoPlainText
      tags:
        - ROR
      parameters:
        - name: crn
          in: path
          description: Customer Record Number (10-digit)
          required: true
          schema:
            type: integer
            format: int64
            minimum: 2000000000
            maximum: 9999999999
      responses:
        '200':
          description: Successful response
          content:
            text/plain:
              schema:
                type: string
                description: Responsible Organization
                example: "ROUTE1234"
        '400':
          description: Bad request
          content:
            text/plain:
              schema:
                type: string
        '404':
          description: Unknown CRN
          content:
            text/plain:
              schema:
                type: string
                example: Unknown
        '500':
          description: Server error
          content:
            text/plain:
              schema:
                type: string
  /telique/dno/{num}:
    get:
      tags:
        - DNO
      summary: DNO Lookup
      description: |
        Check if a phone number is in the Do Not Originate (DNO) database.
        Returns a JSON response indicating whether the number exists in the database.
      operationId: getDno
      parameters:
        - name: num
          in: path
          description: 10-digit phone number to check
          required: true
          schema:
            type: string
            pattern: '^[0-9]{10}$'
            example: "5551234567"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DnoResponse'
        '400':
          description: Bad request - Invalid phone number format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/dno/{num}/xml:
    get:
      tags:
        - DNO
      summary: DNO Lookup (XML)
      description: |
        Check if a phone number is in the Do Not Originate (DNO) database.
        Returns an XML response indicating whether the number exists in the database.
      operationId: getDnoXml
      parameters:
        - name: num
          in: path
          description: 10-digit phone number to check
          required: true
          schema:
            type: string
            pattern: '^[0-9]{10}$'
            example: "5551234567"
      responses:
        '200':
          description: Successful response
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/DnoResponse'
        '400':
          description: Bad request - Invalid phone number format
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/dnc/{num}:
    get:
      tags:
        - DNC
      summary: DNC Lookup
      description: |
        Check if a phone number is in the Do Not Call (DNC) database.
        Returns a JSON response indicating whether the number exists in the database.
      operationId: getDnc
      parameters:
        - name: num
          in: path
          description: 10-digit phone number to check
          required: true
          schema:
            type: string
            pattern: '^[0-9]{10}$'
            example: "5551234567"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DnoResponse'
        '400':
          description: Bad request - Invalid phone number format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/dnc/{num}/xml:
    get:
      tags:
        - DNC
      summary: DNC Lookup (XML)
      description: |
        Check if a phone number is in the Do Not Call (DNC) database.
        Returns an XML response indicating whether the number exists in the database.
      operationId: getDncXml
      parameters:
        - name: num
          in: path
          description: 10-digit phone number to check
          required: true
          schema:
            type: string
            pattern: '^[0-9]{10}$'
            example: "5551234567"
      responses:
        '200':
          description: Successful response
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/DnoResponse'
        '400':
          description: Bad request - Invalid phone number format
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/dncreport:
    get:
      tags:
        - DNC
      summary: DNC Update Report
      description: |
        Retrieve a report of DNC updates by area code (NPA).
      operationId: getDncReport
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DncUpdateReport'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/dnx:
    get:
      tags:
        - DNX
      summary: Combined DNO/DNC Lookup
      description: |
        Check if phone numbers are in both DNO and DNC databases with a single request.
      operationId: getDnx
      parameters:
        - name: dno
          in: query
          description: 10-digit phone number to check against DNO database
          required: true
          schema:
            type: string
            pattern: '^[0-9]{10}$'
            example: "5551234567"
        - name: dnc
          in: query
          description: 10-digit phone number to check against DNC database
          required: true
          schema:
            type: string
            pattern: '^[0-9]{10}$'
            example: "5551234567"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DnxResponse'
        '400':
          description: Bad request - Invalid phone number format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /telique/stirshaken/validate:
    post:
      tags:
        - STIR/SHAKEN
      summary: Validate STIR/SHAKEN Identity
      description: |
        Validates STIR/SHAKEN call authentication by checking the provided identity token.
      operationId: validateStirShaken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StirShakenRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StirShakenResponse'
        '400':
          description: Bad request - Invalid request parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: API key
    ApiKeyAuth:
      type: apiKey
      in: query
      name: api_key
  schemas:
    CNAMResponse:
      type: object
      properties:
        phoneNumber:
          type: string
          description: The phone number that was looked up
          example: "8005551234"
        name:
          type: string
          description: The caller name associated with the phone number
          example: "ACME CORPORATION"
        status:
          type: string
          description: Status of the request
          enum: [success, error]
          example: "success"
        error:
          type: string
          description: Error message (only present when status is "error")
          example: "SS7 network not responding"
        cacheHit:
          type: boolean
          description: Indicates whether the result was found in cache (true) or required an SS7 lookup (false)
          example: true
      required:
        - phoneNumber
        - name
        - status
        - cacheHit
    LrnResponse:
      type: object
      properties:
        phoneNumber:
          type: string
          description: The queried telephone number
          example: '5551234567'
        lrn:
          type: string
          description: Local Routing Number for the queried number
          example: '5552345678'
        spid:
          type: string
          nullable: true
          description: Service Provider ID for the carrier serving this number
          example: 'AB12'
        ported:
          type: boolean
          description: Indicates whether the number has been ported (true) or not (false)
          example: true
      required:
        - phoneNumber
        - lrn
        - ported
    Error:
      type: object
      required:
        - status
        - error
      properties:
        status:
          type: string
          example: error
        error:
          type: string
          example: Invalid phone number format
        error_code:
          type: string
          example: invalid_phone_number
    CICResponse:
      type: object
      properties:
        carrier:
          type: string
          description: Carrier Identification Code
          example: "0123"
        data:
          type: object
          description: Additional data from the interpretation
        ir:
          type: object
          description: Interpretation result data structure
      required:
        - carrier
    RORResponse:
      type: object
      properties:
        ror:
          type: string
          description: Responsible Organization
          example: "ROUTE1234"
      required:
        - ror
    CICRORResponse:
      type: object
      properties:
        carrier:
          type: string
          description: Carrier Identification Code
          example: "0123"
        ror:
          type: string
          description: Responsible Organization
          example: "ROUTE1234"
        data:
          type: object
          description: Additional data from the interpretation
        ir:
          type: object
          description: Interpretation result data structure
      required:
        - carrier
        - ror
    DnoResponse:
      type: object
      properties:
        phoneNumber:
          type: string
          description: The phone number that was looked up
          example: "5551234567"
        recordExists:
          type: boolean
          description: Indicates whether the number exists in the database
          example: true
      required:
        - phoneNumber
        - recordExists
    DnxResponse:
      type: object
      properties:
        dnc:
          type: boolean
          description: Indicates whether the number exists in the DNC database
          example: true
        dno:
          type: boolean
          description: Indicates whether the number exists in the DNO database
          example: false
      required:
        - dnc
        - dno
    DncUpdateReport:
      type: array
      items:
        type: object
        properties:
          npa:
            type: integer
            description: Area code (NPA)
            example: 555
          oldCount:
            type: integer
            description: Previous count of numbers in this NPA
            example: 1200
          newCount:
            type: integer
            description: Current count of numbers in this NPA
            example: 1235
        required:
          - npa
          - oldCount
          - newCount
    StirShakenRequest:
      type: object
      properties:
        token:
          type: string
          description: The identity token to validate
          example: "eyJhbGciOiJSUzI1NiIsInR5cCI6InBhc3Nwb3J0Iiwic3R..."
        certUrl:
          type: string
          description: URL of the certificate
          example: "https://cert.example.org/cert.pem"
        algorithm:
          type: string
          description: Signature algorithm used
          example: "RS256"
        ppt:
          type: string
          description: PASSporT Token Type
          example: "shaken"
      required:
        - token
        - certUrl
        - algorithm
        - ppt
    StirShakenResponse:
      type: object
      properties:
        valid:
          type: boolean
          description: Whether the provided identity is valid
          example: true
      required:
        - valid 